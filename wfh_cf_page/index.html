<!DOCTYPE html>
<html lang="en" data-status="loading">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <title>WFH - Web File Hasher</title>
</head>
<body>
  <header>
    <h1>WFH</h1>
    <p>WFH - Web File Hasher is a utility for hashing files using the <a target="_blank" rel="noopener noreferrer" href="https://en.wikipedia.org/wiki/MD5">MD5 algorithm</a> in web browsers. The core MD5 hashing functionality is implemented in <a target="_blank" rel="noopener noreferrer" href="https://www.rust-lang.org/">Rust</a>  and compiled to <a target="_blank" rel="noopener noreferrer" href="https://developer.mozilla.org/en-US/docs/WebAssembly">WebAssembly</a>. The utility supports hashing entire files in memory, or incrementally hashing larger files via streaming.</p>
    <p>In this particular example, files smaller than 1MB will be hashed in whole once, and larger files will be incrementally hashed via streaming, though the size threshold can be configured.</p>
  </header>
  <hr>
  <main id="hasher">
    <div class="statusBar">
      <svg class="statusBarIcon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
        <circle cx="50" cy="50" r="50" />
      </svg>
      <p role="status" class="statusBarMessage" data-status="loading">loading...</p>
      <p role="status" class="statusBarMessage" data-status="ready">ready</p>
      <p role="status" class="statusBarMessage" data-status="processing">processing...</p>
      <p role="status" class="statusBarMessage" data-status="error">error</p>
    </div>
    <div class="controls">
      <label class="fileInput card" for="input">
        <input aria-hidden="true" id="input" type="file" multiple disabled />
        <div class="fileInputDisplay">
          <svg class="fileInputIcon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13.17,2H6C4.9,2,4,2.9,4,4v16c0,1.1,0.9,2,2,2h9v-6c0-1.1,0.9-2,2-2h3V8.83c0-0.53-0.21-1.04-0.59-1.41l-4.83-4.83 C14.21,2.21,13.7,2,13.17,2z M13,8V3.5L18.5,9H14C13.45,9,13,8.55,13,8z M22.66,17c0,0.55-0.45,1-1,1h-1.24l2.24,2.24 c0.39,0.39,0.39,1.02,0,1.41l0,0c-0.39,0.39-1.02,0.39-1.41,0L19,19.41l0,1.24c0,0.55-0.45,1-1,1c-0.55,0-1-0.45-1-1V17 c0-0.55,0.45-1,1-1h3.66C22.21,16,22.66,16.45,22.66,17z"/>
          </svg>
          <p>Press to open file picker or drop file here</p>
        </div>
      </label>
      <div class="fileInfo card">
        <div class="fileInfoEmpty">
          <svg class="fileIntoEmptyIcon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M0 0h24v24H0V0z" fill="none"/>
            <path d="M20 11H4c-.55 0-1 .45-1 1s.45 1 1 1h16c.55 0 1-.45 1-1s-.45-1-1-1zM4 18h10c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1s.45 1 1 1zM20 6H4c-.55 0-1 .45-1 1v.01c0 .55.45 1 1 1h16c.55 0 1-.45 1-1V7c0-.55-.45-1-1-1z"/>
          </svg>
          <p>Details will show here for each file hashed.</p>
        </div>
        <ul class="fileInfoList">
          <template data-template>
            <li class="fileInfoListItem fadeIn">
              <table class="fileIntoTable">
                <caption data-template-file-caption></caption>
                <tbody>
                  <tr>
                    <th scope="row">Size</th>
                    <td data-template-file-size></td>
                  </tr>
                  <tr>
                    <th scope="row">Hash</th>
                    <td><code data-template-file-hash></code></td>
                  </tr>
                  <tr>
                    <th scope="row">Timing</th>
                    <td data-template-hash-timing></td>
                  </tr>
                </tbody>
              </table>
            </li>
          </template>
        </ul>
      </div>
    </div>
  </main>
  <hr>
  <footer class="footer">
    <p>View the source on <a target="_blank" rel="noopener noreferrer" href="https://github.com/j-arens/wfh">GitHub</a>.</p>
  </footer>
  <script type="module" src="script.ts"></script>
</body>
</html>
